/*!
Holder - client side image placeholders
Version 2.4.1+f2l1h
© 2014 Ivan Malopinsky - http://imsky.co
Site:     http://imsky.github.io/holder
Issues:   https://github.com/imsky/holder/issues
License:  http://opensource.org/licenses/MIT
*/
!function(n,t,i){t[n]=i}("onDomReady",this,function(n){"use strict";function e(n){if(!f){if(!t.body)return u(e);for(f=!0;n=nt.shift();)u(n)}}function i(n){(l||n.type===o||t[p]===y)&&(a(),e())}function a(){l?(t[g](k,i,r),n[g](o,i,r)):(t[b](d,i),n[b](v,i))}function u(n,t){setTimeout(n,+t>=0?t:1)}function h(n){f?u(n):nt.push(n)}null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function tt(){document.removeEventListener("DOMContentLoaded",tt,!1);document.readyState="complete"},!1),document.readyState="loading");var t=n.document,it=t.documentElement,o="load",r=!1,v="on"+o,y="complete",p="readyState",w="attachEvent",b="detachEvent",c="addEventListener",k="DOMContentLoaded",d="onreadystatechange",g="removeEventListener",l=c in t,s=r,f=r,nt=[];if(t[p]===y)u(e);else if(l)t[c](k,i,r),n[c](o,i,r);else{t[w](d,i);n[w](v,i);try{s=null==n.frameElement&&it}catch(ut){}s&&s.doScroll&&!function rt(){if(!f){try{s.doScroll("left")}catch(n){return u(rt,50)}a();e()}}()}return h.version="1.4.0",h.isReady=function(){return f},h}(this));document.querySelectorAll||(document.querySelectorAll=function(n){var i,t=document.createElement("style"),r=[];for(document.documentElement.firstChild.appendChild(t),document._qsa=[],t.styleSheet.cssText=n+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),t.parentNode.removeChild(t);document._qsa.length;)i=document._qsa.shift(),i.style.removeAttribute("x-qsa"),r.push(i);return document._qsa=null,r});document.querySelector||(document.querySelector=function(n){var t=document.querySelectorAll(n);return t.length?t[0]:null});document.getElementsByClassName||(document.getElementsByClassName=function(n){return n=String(n).replace(/^|\s+/g,"."),document.querySelectorAll(n)});Object.keys||(Object.keys=function(n){if(n!==Object(n))throw TypeError("Object.keys called on non-object");var t,i=[];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&i.push(t);return i}),function(n){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.atob=n.atob||function(n){n=String(n);var e,f=0,r=[],i=0,u=0;if(n=n.replace(/\s/g,""),n.length%4==0&&(n=n.replace(/=+$/,"")),n.length%4==1)throw Error("InvalidCharacterError");if(/[^+/0-9A-Za-z]/.test(n))throw Error("InvalidCharacterError");for(;f<n.length;)e=t.indexOf(n.charAt(f)),i=i<<6|e,u+=6,24===u&&(r.push(String.fromCharCode(i>>16&255)),r.push(String.fromCharCode(i>>8&255)),r.push(String.fromCharCode(255&i)),u=0,i=0),f+=1;return 12===u?(i>>=4,r.push(String.fromCharCode(255&i))):18===u&&(i>>=2,r.push(String.fromCharCode(i>>8&255)),r.push(String.fromCharCode(255&i))),r.join("")};n.btoa=n.btoa||function(n){n=String(n);var u,f,e,s,h,o,r,i=0,c=[];if(/[^\x00-\xFF]/.test(n))throw Error("InvalidCharacterError");for(;i<n.length;)u=n.charCodeAt(i++),f=n.charCodeAt(i++),e=n.charCodeAt(i++),s=u>>2,h=(3&u)<<4|f>>4,o=(15&f)<<2|e>>6,r=63&e,i===n.length+2?(o=64,r=64):i===n.length+1&&(r=64),c.push(t.charAt(s),t.charAt(h),t.charAt(o),t.charAt(r));return c.join("")}}(this),function(){function n(t,i,r){t.document;var e,o=t.currentStyle[i].match(/([\d\.]+)(%|cm|em|in|mm|pc|pt|)/)||[0,0,""],u=o[1],f=o[2];return r=r?/%|em/.test(f)&&t.parentElement?n(t.parentElement,"fontSize",null):16:r,e="fontSize"==i?r:/width/i.test(i)?t.clientWidth:t.clientHeight,"%"==f?u/100*e:"cm"==f?.3937*u*96:"em"==f?u*r:"in"==f?96*u:"mm"==f?.3937*u*96/10:"pc"==f?16*u:"pt"==f?96*u/72:u}function t(n,t){var u="border"==t?"Width":"",i=t+"Top"+u,r=t+"Right"+u,f=t+"Bottom"+u,e=t+"Left"+u;n[t]=(n[i]==n[r]&&n[i]==n[f]&&n[i]==n[e]?[n[i]]:n[i]==n[f]&&n[e]==n[r]?[n[i],n[r]]:n[e]==n[r]?[n[i],n[r],n[f]]:[n[i],n[r],n[f],n[e]]).join(" ")}function i(i){var u,r=this,f=i.currentStyle,e=n(i,"fontSize"),o=function(n){return"-"+n.toLowerCase()};for(u in f)if(Array.prototype.push.call(r,"styleFloat"==u?"float":u.replace(/[A-Z]/,o)),"width"==u)r[u]=i.offsetWidth+"px";else if("height"==u)r[u]=i.offsetHeight+"px";else if("styleFloat"==u)r.float=f[u];else if(/margin.|padding.|border.+W/.test(u)&&"auto"!=r[u])r[u]=Math.round(n(i,u,e))+"px";else if(/^outline/.test(u))try{r[u]=f[u]}catch(s){r.outlineColor=f.color;r.outlineStyle=r.outlineStyle||"none";r.outlineWidth=r.outlineWidth||"0px";r.outline=[r.outlineColor,r.outlineWidth,r.outlineStyle].join(" ")}else r[u]=f[u];t(r,"margin");t(r,"padding");t(r,"border");r.fontSize=Math.round(e)+"px"}window.getComputedStyle||(i.prototype={constructor:i,getPropertyPriority:function(){throw new Error("NotSupportedError: DOM Exception 9");},getPropertyValue:function(n){var t=n.replace(/-([a-z])/g,function(n){return n=n.charAt?n.split(""):n,n[1].toUpperCase()});return this[t]},item:function(n){return this[n]},removeProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7");},setProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7");},getPropertyCSSValue:function(){throw new Error("NotSupportedError: DOM Exception 9");}},window.getComputedStyle=function(n){return new i(n)})}();Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(n){var t=this.__proto__||this.constructor.prototype;return n in this&&(!(n in t)||t[n]!==this[n])}),function(n,t){n.augment=t()}(this,function(){"use strict";var t=function(){},i=Array.prototype.slice,n=function(n,r){var s=t.prototype="function"==typeof n?n.prototype:n,u=new t,f=r.apply(u,i.call(arguments,2).concat(s)),e,o;if("object"==typeof f)for(e in f)u[e]=f[e];return u.hasOwnProperty("constructor")?(o=u.constructor,o.prototype=u,o):u};return n.defclass=function(n){var t=n.constructor;return t.prototype=n,t},n.extend=function(t,i){return n(t,function(n){return this.uber=n,i})},n}),function(n,t){function h(n,t,i,r){var u=w(i.substr(i.lastIndexOf(n.domain)),n);u&&b(null,r,u,t)}function w(n,t){for(var r,f,l,a,u={theme:s(i.settings.themes.gray,null),stylesheets:t.stylesheets,holderURL:[]},o=!1,c=String.fromCharCode(11),h=n.replace(/([^\\])\//g,"$1"+c).split(c),v=/%[0-9a-f]{2}/gi,y=h.length,e=0;y>e;e++){if(r=h[e],r.match(v))try{r=decodeURIComponent(r)}catch(p){r=h[e]}f=!1;i.flags.dimensions.match(r)?(o=!0,u.dimensions=i.flags.dimensions.output(r),f=!0):i.flags.fluid.match(r)?(o=!0,u.dimensions=i.flags.fluid.output(r),u.fluid=!0,f=!0):i.flags.textmode.match(r)?(u.textmode=i.flags.textmode.output(r),f=!0):i.flags.colors.match(r)?(l=i.flags.colors.output(r),u.theme=s(u.theme,l),f=!0):t.themes[r]?(t.themes.hasOwnProperty(r)&&(u.theme=s(t.themes[r],null)),f=!0):i.flags.font.match(r)?(u.font=i.flags.font.output(r),f=!0):i.flags.auto.match(r)?(u.auto=!0,f=!0):i.flags.text.match(r)?(u.text=i.flags.text.output(r),f=!0):i.flags.random.match(r)&&(null==i.vars.cache.themeKeys&&(i.vars.cache.themeKeys=Object.keys(t.themes)),a=i.vars.cache.themeKeys[0|Math.random()*i.vars.cache.themeKeys.length],u.theme=s(t.themes[a],null),f=!0);f&&u.holderURL.push(r)}return u.holderURL.unshift(t.domain),u.holderURL=u.holderURL.join("/"),o?u:!1}function b(n,t,u,f){var h=u.dimensions,o=u.theme,p=h.width+"x"+h.height,l,v,y,e;if(n=null==n?u.fluid?"fluid":"image":n,null!=u.text&&(o.text=u.text,"object"===t.nodeName.toLowerCase())){for(l=o.text.split("\\n"),v=0;v<l.length;v++)l[v]=ft(l[v]);o.text=l.join("\\n")}y=u.holderURL;e=s(f,null);u.font&&(o.font=u.font,!e.noFontFallback&&"img"===t.nodeName.toLowerCase()&&i.setup.supportsCanvas&&"svg"===e.renderer&&(e=s(e,{renderer:"canvas"})));u.font&&"canvas"==e.renderer&&(e.reRender=!0);"background"==n?null==t.getAttribute("data-background-src")&&r(t,{"data-background-src":y}):r(t,{"data-src":y});u.theme=o;t.holderData={flags:u,renderSettings:e};("image"==n||"fluid"==n)&&r(t,{alt:o.text?(o.text.length>16?o.text.substring(0,16)+"…":o.text)+" ["+p+"]":p});"image"==n?("html"!=e.renderer&&u.auto||(t.style.width=h.width+"px",t.style.height=h.height+"px"),"html"==e.renderer?t.style.backgroundColor=o.background:(a(n,{dimensions:h,theme:o,flags:u},t,e),u.textmode&&"exact"==u.textmode&&(i.vars.resizableImages.push(t),c(t)))):"background"==n&&"html"!=e.renderer?a(n,{dimensions:h,theme:o,flags:u},t,e):"fluid"==n&&("%"==h.height.slice(-1)?t.style.height=h.height:null!=u.auto&&u.auto||(t.style.height=h.height+"px"),"%"==h.width.slice(-1)?t.style.width=h.width:null!=u.auto&&u.auto||(t.style.width=h.width+"px"),("inline"==t.style.display||""===t.style.display||"none"==t.style.display)&&(t.style.display="block"),d(t),"html"==e.renderer?t.style.backgroundColor=o.background:(i.vars.resizableImages.push(t),c(t)))}function a(n,t,u,f){function h(){var n=null;switch(f.renderer){case"canvas":n=st(s);break;case"svg":n=ht(s,f);break;default:throw"Holder: invalid renderer: "+f.renderer;}return n}var o=null,e,s;switch(f.renderer){case"svg":if(!i.setup.supportsSVG)return;break;case"canvas":if(!i.setup.supportsCanvas)return;break;default:return}if(e={width:t.dimensions.width,height:t.dimensions.height,theme:t.theme,flags:t.flags},s=nt(e),({text:e.text,width:e.width,height:e.height,textHeight:e.font.size,font:e.font.family,fontWeight:e.font.weight,template:e.theme}),o=h(),null==o)throw"Holder: couldn't render placeholder";"background"==n?(u.style.backgroundImage="url("+o+")",u.style.backgroundSize=e.width+"px "+e.height+"px"):("img"===u.nodeName.toLowerCase()?r(u,{src:o}):"object"===u.nodeName.toLowerCase()&&(r(u,{data:o}),r(u,{type:"image/svg+xml"})),f.reRender&&setTimeout(function(){var n=h();if(null==n)throw"Holder: couldn't render placeholder";"img"===u.nodeName.toLowerCase()?r(u,{src:n}):"object"===u.nodeName.toLowerCase()&&(r(u,{data:n}),r(u,{type:"image/svg+xml"}))},100));r(u,{"data-holder-rendered":!0})}function nt(n){function v(n,t,i,r){t.width=i;t.height=r;n.width=Math.max(n.width,t.width);n.height+=t.height;n.add(t)}var t,u,e,r,c,h,a,w;switch(n.font={family:n.theme.font?n.theme.font:"Arial, Helvetica, Open Sans, sans-serif",size:tt(n.width,n.height,n.theme.size?n.theme.size:i.defaults.size),units:n.theme.units?n.theme.units:i.defaults.units,weight:n.theme.fontweight?n.theme.fontweight:"bold"},n.text=n.theme.text?n.theme.text:Math.floor(n.width)+"x"+Math.floor(n.height),n.flags.textmode){case"literal":n.text=n.flags.dimensions.width+"x"+n.flags.dimensions.height;break;case"exact":if(!n.flags.exactDimensions)break;n.text=Math.floor(n.flags.exactDimensions.width)+"x"+Math.floor(n.flags.exactDimensions.height)}var s=new ct({width:n.width,height:n.height}),f=s.Shape,y=new f.Rect("holderBg",{fill:n.theme.background});if(y.resize(n.width,n.height),s.root.add(y),t=new f.Group("holderTextGroup",{text:n.text,align:"center",font:n.font,fill:n.theme.foreground}),t.moveTo(null,null,1),s.root.add(t),u=t.textPositionData=ot(s),!u)throw"Holder: staging fallback not supported yet.";if(t.properties.leading=u.boundingBox.height,e=null,r=null,u.lineCount>1){var o=0,p=0,b=n.width*i.setup.lineWrapRatio,l=0;for(r=new f.Group("line"+l),c=0;c<u.words.length;c++)h=u.words[c],e=new f.Text(h.text),a="\\n"==h.text,(o+h.width>=b||a===!0)&&(v(t,r,o,t.properties.leading),o=0,p+=t.properties.leading,l+=1,r=new f.Group("line"+l),r.y=p),a!==!0&&(e.moveTo(o,0),o+=u.spaceWidth+h.width,r.add(e));v(t,r,o,t.properties.leading);for(w in t.children)r=t.children[w],r.moveTo((t.width-r.width)/2,null,null);t.moveTo((n.width-t.width)/2,(n.height-t.height)/2,null);(n.height-t.height)/2<0&&t.moveTo(null,0,null)}else e=new f.Text(n.text),r=new f.Group("line0"),r.add(e),t.add(r),t.moveTo((n.width-u.boundingBox.width)/2,(n.height-u.boundingBox.height)/2,null);return s}function tt(n,t,r){t=parseInt(t,10);n=parseInt(n,10);var u=Math.max(t,n),f=Math.min(t,n),e=i.defaults.scale,o=Math.min(.75*f,.75*u*e);return Math.round(Math.max(r,o))}function c(n){var e,s,f,t,r,o,h;e=null==n||null==n.nodeType?i.vars.resizableImages:[n];for(s in e)if(e.hasOwnProperty(s)&&(f=e[s],f.holderData&&(t=f.holderData.flags,r=k(f,u.invisibleErrorFn(c)),r))){if(t.fluid&&t.auto){o=f.holderData.fluidConfig;switch(o.mode){case"width":r.height=r.width/o.ratio;break;case"height":r.width=r.height*o.ratio}}h={dimensions:r,theme:t.theme,flags:t};t.textmode&&"exact"==t.textmode&&(t.exactDimensions=r,h.dimensions=t.dimensions);a("image",h,f,f.holderData.renderSettings)}}function k(n,t){var i={height:n.clientHeight,width:n.clientWidth};return i.height||i.width?(n.removeAttribute("data-holder-invisible"),i):(r(n,{"data-holder-invisible":!0}),t.call(this,n),void 0)}function d(n){var r,i,t;n.holderData&&(r=k(n,u.invisibleErrorFn(d)),r&&(i=n.holderData.flags,t={fluidHeight:"%"==i.dimensions.height.slice(-1),fluidWidth:"%"==i.dimensions.width.slice(-1),mode:null,initialDimensions:r},t.fluidWidth&&!t.fluidHeight?(t.mode="width",t.ratio=t.initialDimensions.width/parseFloat(i.dimensions.height)):!t.fluidWidth&&t.fluidHeight&&(t.mode="height",t.ratio=parseFloat(i.dimensions.width)/t.initialDimensions.height),n.holderData.fluidConfig=t))}function f(n,t){return null==t?e.createElement(n):e.createElementNS(t,n)}function r(n,t){for(var i in t)n.setAttribute(i,t[i])}function v(n,t,i){if(null==n){n=f("svg",o);var u=f("defs",o);n.appendChild(u)}return n.webkitMatchesSelector&&n.setAttribute("xmlns",o),r(n,{width:t,height:i,viewBox:"0 0 "+t+" "+i,preserveAspectRatio:"none"}),n}function it(n,i){var r,u,h,c,f;if(t.XMLSerializer){var e=new XMLSerializer,o="",s=i.stylesheets;if(n.querySelector("defs"),i.svgXMLStylesheet){for(r=(new DOMParser).parseFromString("<xml />","application/xml"),u=s.length-1;u>=0;u--)h=r.createProcessingInstruction("xml-stylesheet",'href="'+s[u]+'" rel="stylesheet"'),r.insertBefore(h,r.firstChild);c=r.createProcessingInstruction("xml",'version="1.0" encoding="UTF-8" standalone="yes"');r.insertBefore(c,r.firstChild);r.removeChild(r.documentElement);o=e.serializeToString(r)}return f=e.serializeToString(n),f=f.replace(/\&amp;(\#[0-9]{2,}\;)/g,"&$1"),o+f}}function s(n,t){var u={},i,r;for(i in n)n.hasOwnProperty(i)&&(u[i]=n[i]);if(null!=t)for(r in t)t.hasOwnProperty(r)&&(u[r]=t[r]);return u}function g(n){var i=[];for(var t in n)n.hasOwnProperty(t)&&i.push(t+":"+n[t]);return i.join(";")}function rt(n){i.vars.debounceTimer||n.call(this);i.vars.debounceTimer&&clearTimeout(i.vars.debounceTimer);i.vars.debounceTimer=setTimeout(function(){i.vars.debounceTimer=null;n.call(this)},i.setup.debounce)}function y(){rt(function(){c(null)})}function l(n){var i=null;return"string"==typeof n?i=e.querySelectorAll(n):t.NodeList&&n instanceof t.NodeList?i=n:t.Node&&n instanceof t.Node?i=[n]:t.HTMLCollection&&n instanceof t.HTMLCollection?i=n:null===n&&(i=[]),i}function ut(n,t){var i=new Image;i.onerror=function(){t.call(this,!1)};i.onload=function(){t.call(this,!0)};i.src=n}function ft(n){for(var i=[],r=0,t=n.length-1;t>=0;t--)r=n.charCodeAt(t),r>128?i.unshift(["&#",r,";"].join("")):i.unshift(n[t]);return i.join("")}function et(n){return n.replace(/&#(\d+);/g,function(n,t){return String.fromCharCode(t)})}var o="http://www.w3.org/2000/svg",e=t.document,u={addTheme:function(n,t){return null!=n&&null!=t&&(i.settings.themes[n]=t),delete i.vars.cache.themeKeys,this},addImage:function(n,t){var u=e.querySelectorAll(t),i,s,o;if(u.length)for(i=0,s=u.length;s>i;i++)o=f("img"),r(o,{"data-src":n}),u[i].appendChild(o);return this},run:function(n){var e,r,u,p,ot,v,st,k,nt,ct,tt,it,d,c,lt,at,a,o;n=n||{};e={};i.vars.preempted=!0;r=s(i.settings,n);e.renderer=r.renderer?r.renderer:i.setup.renderer;-1===i.setup.renderers.join(",").indexOf(e.renderer)&&(e.renderer=i.setup.supportsSVG?"svg":i.setup.supportsCanvas?"canvas":"html");r.use_canvas?e.renderer="canvas":r.use_svg&&(e.renderer="svg");var rt=l(r.images),g=l(r.bgnodes),ft=l(r.stylenodes),et=l(r.objects);for(e.stylesheets=[],e.svgXMLStylesheet=!0,e.noFontFallback=r.noFontFallback?r.noFontFallback:!1,u=0;u<ft.length;u++)p=ft[u],p.attributes.rel&&p.attributes.href&&"stylesheet"==p.attributes.rel.value&&(ot=p.attributes.href.value,v=f("a"),v.href=ot,st=v.protocol+"//"+v.host+v.pathname+v.search,e.stylesheets.push(st));for(u=0;u<g.length;u++){var yt=t.getComputedStyle(g[u],null).getPropertyValue("background-image"),ht=g[u].getAttribute("data-background-src"),y=null;y=null==ht?yt:ht;k=null;nt="?"+r.domain+"/";0===y.indexOf(nt)?k=y.slice(1):-1!=y.indexOf(nt)&&(ct=y.substr(y.indexOf(nt)).slice(1),tt=ct.match(/([^\"]*)"?\)/),null!=tt&&(k=tt[1]));null!=k&&(it=w(k,r),it&&b("background",g[u],it,e))}for(u=0;u<et.length;u++){d=et[u];c={};try{c.data=d.getAttribute("data");c.dataSrc=d.getAttribute("data-src")}catch(bt){}lt=null!=c.data&&0===c.data.indexOf(r.domain);at=null!=c.dataSrc&&0===c.dataSrc.indexOf(r.domain);lt?h(r,e,c.data,d):at&&h(r,e,c.dataSrc,d)}for(u=0;u<rt.length;u++){a=rt[u];o={};try{o.src=a.getAttribute("src");o.dataSrc=a.getAttribute("data-src");o.rendered=a.getAttribute("data-holder-rendered")}catch(bt){}var pt=null!=o.src,vt=null!=o.dataSrc&&0===o.dataSrc.indexOf(r.domain),wt=null!=o.rendered&&"true"==o.rendered;pt?0===o.src.indexOf(r.domain)?h(r,e,o.src,a):vt&&(wt?h(r,e,o.dataSrc,a):!function(n,t,i,r,u){ut(n,function(n){n||h(t,i,r,u)})}(o.src,r,e,o.dataSrc,a)):vt&&h(r,e,o.dataSrc,a)}return this},invisibleErrorFn:function(){return function(n){if(n.hasAttribute("data-holder-invisible"))throw"Holder: invisible placeholder";}}},p;u.add_theme=u.addTheme;u.add_image=u.addImage;u.invisible_error_fn=u.invisibleErrorFn;var i={settings:{domain:"holder.js",images:"img",objects:"object",bgnodes:"body .holderjs",stylenodes:"head link.holderjs",stylesheets:[],themes:{gray:{background:"#EEEEEE",foreground:"#AAAAAA"},social:{background:"#3a5a97",foreground:"#FFFFFF"},industrial:{background:"#434A52",foreground:"#C2F200"},sky:{background:"#0D8FDB",foreground:"#FFFFFF"},vine:{background:"#39DBAC",foreground:"#1E292C"},lava:{background:"#F8591A",foreground:"#1C2846"}}},defaults:{size:10,units:"pt",scale:1/16},flags:{dimensions:{regex:/^(\d+)x(\d+)$/,output:function(n){var t=this.regex.exec(n);return{width:+t[1],height:+t[2]}}},fluid:{regex:/^([0-9]+%?)x([0-9]+%?)$/,output:function(n){var t=this.regex.exec(n);return{width:t[1],height:t[2]}}},colors:{regex:/(?:#|\^)([0-9a-f]{3,})\:(?:#|\^)([0-9a-f]{3,})/i,output:function(n){var t=this.regex.exec(n);return{foreground:"#"+t[2],background:"#"+t[1]}}},text:{regex:/text\:(.*)/,output:function(n){return this.regex.exec(n)[1].replace("\\/","/")}},font:{regex:/font\:(.*)/,output:function(n){return this.regex.exec(n)[1]}},auto:{regex:/^auto$/},textmode:{regex:/textmode\:(.*)/,output:function(n){return this.regex.exec(n)[1]}},random:{regex:/^random$/}}},ot=function(){var n=null,t=null,u=null;return function(s){var a=s.root,y,b,k,h,c,tt;if(i.setup.supportsSVG){y=!1;b=function(n){return e.createTextNode(n)};null==n&&(y=!0);n=v(n,a.properties.width,a.properties.height);y&&(t=f("text",o),u=b(null),r(t,{x:0}),t.appendChild(u),n.appendChild(t),e.body.appendChild(n),n.style.visibility="hidden",n.style.position="absolute",n.style.top="-100%",n.style.left="-100%");k=a.children.holderTextGroup;h=k.properties;r(t,{y:h.font.size,style:g({"font-weight":h.font.weight,"font-size":h.font.size+h.font.units,"font-family":h.font.family,"dominant-baseline":"middle"})});u.nodeValue=h.text;var p=t.getBBox(),w=Math.ceil(p.width/(a.properties.width*i.setup.lineWrapRatio)),l=h.text.split(" "),d=h.text.match(/\\n/g);w+=null==d?0:d.length;u.nodeValue=h.text.replace(/[ ]+/g,"");var it=t.getComputedTextLength(),rt=p.width-it,ut=Math.round(rt/Math.max(1,l.length-1)),nt=[];if(w>1)for(u.nodeValue="",c=0;c<l.length;c++)0!==l[c].length&&(u.nodeValue=et(l[c]),tt=t.getBBox(),nt.push({text:l[c],width:tt.width}));return{spaceWidth:ut,lineCount:w,boundingBox:p,words:nt}}return!1}}(),st=function(){var t=f("canvas"),n=null;return function(r){var f,u,s,e,h;null==n&&(n=t.getContext("2d"));f=r.root;t.width=i.dpr(f.properties.width);t.height=i.dpr(f.properties.height);n.textBaseline="middle";n.fillStyle=f.children.holderBg.properties.fill;n.fillRect(0,0,i.dpr(f.children.holderBg.width),i.dpr(f.children.holderBg.height));u=f.children.holderTextGroup;u.properties;n.font=u.properties.font.weight+" "+i.dpr(u.properties.font.size)+u.properties.font.units+" "+u.properties.font.family+", monospace";n.fillStyle=u.properties.fill;for(s in u.children){e=u.children[s];for(h in e.children){var o=e.children[h],c=i.dpr(u.x+e.x+o.x),l=i.dpr(u.y+e.y+o.y+u.properties.leading/2);n.fillText(o.properties.text,c,l)}}return t.toDataURL("image/png")}}(),ht=function(){if(t.XMLSerializer){var n=v(null,0,0),i=f("rect",o);return n.appendChild(i),function(t,u){var s=t.root,y,c,k,a,d;for(v(n,s.properties.width,s.properties.height),y=n.querySelectorAll("g"),c=0;c<y.length;c++)y[c].parentNode.removeChild(y[c]);r(i,{width:s.children.holderBg.width,height:s.children.holderBg.height,fill:s.children.holderBg.properties.fill});var h=s.children.holderTextGroup,l=h.properties,b=f("g",o);n.appendChild(b);for(k in h.children){a=h.children[k];for(d in a.children){var p=a.children[d],tt=h.x+a.x+p.x,rt=h.y+a.y+p.y+h.properties.leading/2,w=f("text",o),nt=e.createTextNode(null);r(w,{x:tt,y:rt,style:g({fill:l.fill,"font-weight":l.font.weight,"font-family":l.font.family+", monospace","font-size":l.font.size+l.font.units,"dominant-baseline":"central"})});nt.nodeValue=p.properties.text;w.appendChild(nt);b.appendChild(w)}}return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(it(n,u))))}}}(),ct=function(n){function r(n,t){for(var i in t)n[i]=t[i];return n}var t=1,i=augment.defclass({constructor:function(n){t++;this.parent=null;this.children={};this.id=t;this.name="n"+t;null!=n&&(this.name=n);this.x=0;this.y=0;this.z=0;this.width=0;this.height=0},resize:function(n,t){null!=n&&(this.width=n);null!=t&&(this.height=t)},moveTo:function(n,t,i){this.x=null!=n?n:this.x;this.y=null!=t?t:this.y;this.z=null!=i?i:this.z},add:function(n){var t=n.name;if(null!=this.children[t])throw"SceneGraph: child with that name already exists: "+t;this.children[t]=n;n.parent=this}}),u=augment(i,function(t){this.constructor=function(){t.constructor.call(this,"root");this.properties=n}}),f=augment(i,function(n){function t(t,i){if(n.constructor.call(this,t),this.properties={fill:"#000"},null!=i)r(this.properties,i);else if(null!=t&&"string"!=typeof t)throw"SceneGraph: invalid node name";}this.Group=augment.extend(this,{constructor:t,type:"group"});this.Rect=augment.extend(this,{constructor:t,type:"rect"});this.Text=augment.extend(this,{constructor:function(n){t.call(this);this.properties.text=n},type:"text"})}),e=new u;return this.Shape=f,this.root=e,this};for(p in i.flags)i.flags.hasOwnProperty(p)&&(i.flags[p].match=function(n){return n.match(this.regex)});i.setup={renderer:"html",debounce:100,ratio:1,supportsCanvas:!1,supportsSVG:!1,lineWrapRatio:.9,renderers:["html","canvas","svg"]};i.dpr=function(n){return n*i.setup.ratio};i.vars={preempted:!1,resizableImages:[],debounceTimer:null,cache:{}},function(){var u=1,s=1,r=f("canvas"),n=null;r.getContext&&-1!=r.toDataURL("image/png").indexOf("data:image/png")&&(i.setup.renderer="canvas",n=r.getContext("2d"),i.setup.supportsCanvas=!0);i.setup.supportsCanvas&&(u=t.devicePixelRatio||1,s=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1);i.setup.ratio=u/s;e.createElementNS&&e.createElementNS(o,"svg").createSVGRect&&(i.setup.renderer="svg",i.setup.supportsSVG=!0)}();n(u,"Holder",t);t.onDomReady&&t.onDomReady(function(){i.vars.preempted||u.run();t.addEventListener?(t.addEventListener("resize",y,!1),t.addEventListener("orientationchange",y,!1)):t.attachEvent("onresize",y);"object"==typeof t.Turbolinks&&t.document.addEventListener("page:change",function(){u.run()})})}(function(n,t,i){var r="function"==typeof define&&define.amd;r?define(n):i[t]=n},this);